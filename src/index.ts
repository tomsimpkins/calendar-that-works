import { getCalendarShapes } from "./calendarShapes";
import { execDraw } from "./draw";
import ical from "ical";

const ics = `BEGIN:VCALENDAR
METHOD:PUBLISH
PRODID:Microsoft Exchange Server 2010
VERSION:2.0
X-WR-CALNAME:Calendar
BEGIN:VTIMEZONE
TZID:GMT Standard Time
BEGIN:STANDARD
DTSTART:16010101T020000
TZOFFSETFROM:+0100
TZOFFSETTO:+0000
RRULE:FREQ=YEARLY;INTERVAL=1;BYDAY=-1SU;BYMONTH=10
END:STANDARD
BEGIN:DAYLIGHT
DTSTART:16010101T010000
TZOFFSETFROM:+0000
TZOFFSETTO:+0100
RRULE:FREQ=YEARLY;INTERVAL=1;BYDAY=-1SU;BYMONTH=3
END:DAYLIGHT
END:VTIMEZONE
BEGIN:VEVENT
DESCRIPTION:A description\n
UID:040000008200E00074C5B7101A82E008000000001929E4C23C4ED601000000000000000
 010000000D39CC8FBAF8D4D468FCB4EE333786E0F
SUMMARY:Test ical
DTSTART;TZID=GMT Standard Time:20200629T190000
DTEND;TZID=GMT Standard Time:20200629T193000
CLASS:PUBLIC
PRIORITY:5
DTSTAMP:20200629T174846Z
TRANSP:OPAQUE
STATUS:CONFIRMED
SEQUENCE:0
LOCATION:
X-MICROSOFT-CDO-APPT-SEQUENCE:0
X-MICROSOFT-CDO-BUSYSTATUS:BUSY
X-MICROSOFT-CDO-INTENDEDSTATUS:BUSY
X-MICROSOFT-CDO-ALLDAYEVENT:FALSE
X-MICROSOFT-CDO-IMPORTANCE:1
X-MICROSOFT-CDO-INSTTYPE:0
X-MICROSOFT-DONOTFORWARDMEETING:FALSE
X-MICROSOFT-DISALLOW-COUNTER:FALSE
END:VEVENT
BEGIN:VEVENT
UID:040000008200E00074C5B7101A82E008000000003D9CCFCDA549D601000000000000000
 010000000180B98667C831945A4858E799DF5D5BA
SUMMARY:Private Appointment
DTSTART;VALUE=DATE:20200724
DTEND;VALUE=DATE:20200725
CLASS:PRIVATE
PRIORITY:5
DTSTAMP:20200629T174846Z
TRANSP:TRANSPARENT
STATUS:CONFIRMED
X-MICROSOFT-CDO-BUSYSTATUS:FREE
X-MICROSOFT-CDO-INTENDEDSTATUS:BUSY
X-MICROSOFT-CDO-ALLDAYEVENT:TRUE
X-MICROSOFT-CDO-IMPORTANCE:1
X-MICROSOFT-CDO-INSTTYPE:0
X-MICROSOFT-DONOTFORWARDMEETING:FALSE
X-MICROSOFT-DISALLOW-COUNTER:FALSE
END:VEVENT
BEGIN:VEVENT
UID:040000008200E00074C5B7101A82E00800000000CD4134CEA549D601000000000000000
 0100000001864C1898DA94C4BA940724CDB1E40C6
SUMMARY:Private Appointment
DTSTART;VALUE=DATE:20200726
DTEND;VALUE=DATE:20200727
CLASS:PRIVATE
PRIORITY:5
DTSTAMP:20200629T174846Z
TRANSP:TRANSPARENT
STATUS:CONFIRMED
X-MICROSOFT-CDO-BUSYSTATUS:FREE
X-MICROSOFT-CDO-INTENDEDSTATUS:BUSY
X-MICROSOFT-CDO-ALLDAYEVENT:TRUE
X-MICROSOFT-CDO-IMPORTANCE:1
X-MICROSOFT-CDO-INSTTYPE:0
X-MICROSOFT-DONOTFORWARDMEETING:FALSE
X-MICROSOFT-DISALLOW-COUNTER:FALSE
END:VEVENT
END:VCALENDAR
`;

console.log(ical.parseICS(ics));

const canvas = document.getElementById("canvas")! as HTMLCanvasElement;
const ctx = canvas.getContext("2d")!;

setTimeout(() => {
  execDraw(ctx, getCalendarShapes());
}, 1000);
